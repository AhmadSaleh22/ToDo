{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Ahmad Saleh\\\\todois\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{FaRegListAlt,FaRegCalendarAlt}from'react-icons/fa';import moment from'moment';import{firebase}from'../firebase';import{useSelectedProjectValue}from'../context';import{ProjectOverlay}from'./ProjectOverlay';import{TaskDate}from'./TaskDate';export var AddTask=function AddTask(_ref){var _ref$showAddTaskMain=_ref.showAddTaskMain,showAddTaskMain=_ref$showAddTaskMain===void 0?true:_ref$showAddTaskMain,_ref$shouldShowMain=_ref.shouldShowMain,shouldShowMain=_ref$shouldShowMain===void 0?false:_ref$shouldShowMain,showQuickAddTask=_ref.showQuickAddTask,setShowQuickAddTask=_ref.setShowQuickAddTask;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),task=_useState2[0],setTask=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),taskDate=_useState4[0],setTaskDate=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),project=_useState6[0],setProject=_useState6[1];var _useState7=useState(shouldShowMain),_useState8=_slicedToArray(_useState7,2),showMain=_useState8[0],setShowMain=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showProjectOverlay=_useState10[0],setShowProjectOverlay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showTaskDate=_useState12[0],setShowTaskDate=_useState12[1];var _useSelectedProjectVa=useSelectedProjectValue(),selectedProject=_useSelectedProjectVa.selectedProject;var addTask=function addTask(){var projectId=project||selectedProject;var collatedDate='';if(projectId==='TODAY'){collatedDate=moment().format('DD/MM/YYYY');}else if(projectId==='NEXT_7'){collatedDate=moment().add(7,'days').format('DD/MM/YYYY');}return task&&projectId&&firebase.firestore().collection('tasks').add({archived:false,projectId:projectId,task:task,date:collatedDate||taskDate,userId:'ahmadsaleh'}).then(function(){setTask('');setProject('');setShowMain('');setShowProjectOverlay(false);});};return/*#__PURE__*/React.createElement(\"div\",{className:showQuickAddTask?'add-task add-task__overlay':'add-task',\"data-testid\":\"add-task-comp\"},showAddTaskMain&&/*#__PURE__*/React.createElement(\"div\",{className:\"add-task__shallow\",\"data-testid\":\"show-main-action\",onClick:function onClick(){return setShowMain(!showMain);},onKeyDown:function onKeyDown(e){if(e.key==='Enter')setShowMain(!showMain);},tabIndex:0,\"aria-label\":\"Add task\",role:\"button\"},/*#__PURE__*/React.createElement(\"span\",{className:\"add-task__plus\"},\"+\"),/*#__PURE__*/React.createElement(\"span\",{className:\"add-task__text\"},\"Add Task\")),(showMain||showQuickAddTask)&&/*#__PURE__*/React.createElement(\"div\",{className:\"add-task__main\",\"data-testid\":\"add-task-main\"},showQuickAddTask&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{\"data-testid\":\"quick-add-task\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"header\"},\"Quick Add Task\"),/*#__PURE__*/React.createElement(\"span\",{className:\"add-task__cancel-x\",\"data-testid\":\"add-task-quick-cancel\",\"aria-label\":\"Cancel adding task\",onClick:function onClick(){setShowMain(false);setShowProjectOverlay(false);setShowQuickAddTask(false);},onKeyDown:function onKeyDown(e){if(e.key==='Enter'){setShowMain(false);setShowProjectOverlay(false);setShowQuickAddTask(false);}},tabIndex:0,role:\"button\"},\"X\"))),/*#__PURE__*/React.createElement(ProjectOverlay,{setProject:setProject,showProjectOverlay:showProjectOverlay,setShowProjectOverlay:setShowProjectOverlay}),/*#__PURE__*/React.createElement(TaskDate,{setTaskDate:setTaskDate,showTaskDate:showTaskDate,setShowTaskDate:setShowTaskDate}),/*#__PURE__*/React.createElement(\"input\",{className:\"add-task__content\",\"aria-label\":\"Enter your task\",\"data-testid\":\"add-task-content\",type:\"text\",value:task,onChange:function onChange(e){return setTask(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"add-task__submit\",\"data-testid\":\"add-task\",onClick:function onClick(){return showQuickAddTask?addTask()&&setShowQuickAddTask(false):addTask();}},\"Add Task\"),!showQuickAddTask&&/*#__PURE__*/React.createElement(\"span\",{className:\"add-task__cancel\",\"data-testid\":\"add-task-main-cancel\",onClick:function onClick(){setShowMain(false);setShowProjectOverlay(false);},onKeyDown:function onKeyDown(e){if(e.key==='Enter'){setShowMain(false);setShowProjectOverlay(false);}},\"aria-label\":\"Cancel adding a task\",tabIndex:0,role:\"button\"},\"Cancel\"),/*#__PURE__*/React.createElement(\"span\",{className:\"add-task__project\",\"data-testid\":\"show-project-overlay\",onClick:function onClick(){return setShowProjectOverlay(!showProjectOverlay);},onKeyDown:function onKeyDown(e){if(e.key==='Enter')setShowProjectOverlay(!showProjectOverlay);},tabIndex:0,role:\"button\"},/*#__PURE__*/React.createElement(FaRegListAlt,null)),/*#__PURE__*/React.createElement(\"span\",{className:\"add-task__date\",\"data-testid\":\"show-task-date-overlay\",onClick:function onClick(){return setShowTaskDate(!showTaskDate);},onKeyDown:function onKeyDown(e){if(e.key==='Enter')setShowTaskDate(!showTaskDate);},tabIndex:0,role:\"button\"},/*#__PURE__*/React.createElement(FaRegCalendarAlt,null))));};","map":{"version":3,"sources":["C:/Users/Ahmad Saleh/todois/src/component/AddTask.js"],"names":["React","useState","FaRegListAlt","FaRegCalendarAlt","moment","firebase","useSelectedProjectValue","ProjectOverlay","TaskDate","AddTask","showAddTaskMain","shouldShowMain","showQuickAddTask","setShowQuickAddTask","task","setTask","taskDate","setTaskDate","project","setProject","showMain","setShowMain","showProjectOverlay","setShowProjectOverlay","showTaskDate","setShowTaskDate","selectedProject","addTask","projectId","collatedDate","format","add","firestore","collection","archived","date","userId","then","e","key","target","value"],"mappings":"0JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,YAAT,CAAuBC,gBAAvB,KAA+C,gBAA/C,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CAEA,OAASC,QAAT,KAAyB,aAAzB,CACA,OAASC,uBAAT,KAAwC,YAAxC,CACA,OAASC,cAAT,KAA+B,kBAA/B,CACA,OAASC,QAAT,KAAyB,YAAzB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAKjB,+BAJJC,eAII,CAJJA,eAII,+BAJc,IAId,+CAHJC,cAGI,CAHJA,cAGI,8BAHa,KAGb,qBAFJC,gBAEI,MAFJA,gBAEI,CADJC,mBACI,MADJA,mBACI,eACoBZ,QAAQ,CAAC,EAAD,CAD5B,wCACGa,IADH,eACSC,OADT,8BAE4Bd,QAAQ,CAAC,EAAD,CAFpC,yCAEGe,QAFH,eAEaC,WAFb,8BAG0BhB,QAAQ,CAAC,EAAD,CAHlC,yCAGGiB,OAHH,eAGYC,UAHZ,8BAI4BlB,QAAQ,CAACU,cAAD,CAJpC,yCAIGS,QAJH,eAIaC,WAJb,8BAKgDpB,QAAQ,CAAC,KAAD,CALxD,0CAKGqB,kBALH,gBAKuBC,qBALvB,gCAMoCtB,QAAQ,CAAC,KAAD,CAN5C,2CAMGuB,YANH,gBAMiBC,eANjB,0CAQwBnB,uBAAuB,EAR/C,CAQIoB,eARJ,uBAQIA,eARJ,CAUJ,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,GAAMC,CAAAA,SAAS,CAAGV,OAAO,EAAIQ,eAA7B,CACA,GAAIG,CAAAA,YAAY,CAAG,EAAnB,CAEA,GAAID,SAAS,GAAK,OAAlB,CAA2B,CACzBC,YAAY,CAAGzB,MAAM,GAAG0B,MAAT,CAAgB,YAAhB,CAAf,CACD,CAFD,IAEO,IAAIF,SAAS,GAAK,QAAlB,CAA4B,CACjCC,YAAY,CAAGzB,MAAM,GAAG2B,GAAT,CAAa,CAAb,CAAgB,MAAhB,EAAwBD,MAAxB,CAA+B,YAA/B,CAAf,CACD,CAED,MACEhB,CAAAA,IAAI,EACJc,SADA,EAEAvB,QAAQ,CACL2B,SADH,GAEGC,UAFH,CAEc,OAFd,EAGGF,GAHH,CAGO,CACHG,QAAQ,CAAE,KADP,CAEHN,SAAS,CAATA,SAFG,CAGHd,IAAI,CAAJA,IAHG,CAIHqB,IAAI,CAAEN,YAAY,EAAIb,QAJnB,CAKHoB,MAAM,CAAE,YALL,CAHP,EAUGC,IAVH,CAUQ,UAAM,CACVtB,OAAO,CAAC,EAAD,CAAP,CACAI,UAAU,CAAC,EAAD,CAAV,CACAE,WAAW,CAAC,EAAD,CAAX,CACAE,qBAAqB,CAAC,KAAD,CAArB,CACD,CAfH,CAHF,CAoBD,CA9BD,CAgCA,mBACE,2BACE,SAAS,CAAEX,gBAAgB,CAAG,4BAAH,CAAkC,UAD/D,CAEE,cAAY,eAFd,EAIGF,eAAe,eACd,2BACE,SAAS,CAAC,mBADZ,CAEE,cAAY,kBAFd,CAGE,OAAO,CAAE,yBAAMW,CAAAA,WAAW,CAAC,CAACD,QAAF,CAAjB,EAHX,CAIE,SAAS,CAAE,mBAACkB,CAAD,CAAO,CAChB,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuBlB,WAAW,CAAC,CAACD,QAAF,CAAX,CACxB,CANH,CAOE,QAAQ,CAAE,CAPZ,CAQE,aAAW,UARb,CASE,IAAI,CAAC,QATP,eAWE,4BAAM,SAAS,CAAC,gBAAhB,MAXF,cAYE,4BAAM,SAAS,CAAC,gBAAhB,aAZF,CALJ,CAqBG,CAACA,QAAQ,EAAIR,gBAAb,gBACC,2BAAK,SAAS,CAAC,gBAAf,CAAgC,cAAY,eAA5C,EACGA,gBAAgB,eACf,qDACE,2BAAK,cAAY,gBAAjB,eACE,0BAAI,SAAS,CAAC,QAAd,mBADF,cAEE,4BACE,SAAS,CAAC,oBADZ,CAEE,cAAY,uBAFd,CAGE,aAAW,oBAHb,CAIE,OAAO,CAAE,kBAAM,CACbS,WAAW,CAAC,KAAD,CAAX,CACAE,qBAAqB,CAAC,KAAD,CAArB,CACAV,mBAAmB,CAAC,KAAD,CAAnB,CACD,CARH,CASE,SAAS,CAAE,mBAACyB,CAAD,CAAO,CAChB,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuB,CACrBlB,WAAW,CAAC,KAAD,CAAX,CACAE,qBAAqB,CAAC,KAAD,CAArB,CACAV,mBAAmB,CAAC,KAAD,CAAnB,CACD,CACF,CAfH,CAgBE,QAAQ,CAAE,CAhBZ,CAiBE,IAAI,CAAC,QAjBP,MAFF,CADF,CAFJ,cA6BE,oBAAC,cAAD,EACE,UAAU,CAAEM,UADd,CAEE,kBAAkB,CAAEG,kBAFtB,CAGE,qBAAqB,CAAEC,qBAHzB,EA7BF,cAkCE,oBAAC,QAAD,EACE,WAAW,CAAEN,WADf,CAEE,YAAY,CAAEO,YAFhB,CAGE,eAAe,CAAEC,eAHnB,EAlCF,cAuCE,6BACE,SAAS,CAAC,mBADZ,CAEE,aAAW,iBAFb,CAGE,cAAY,kBAHd,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAEX,IALT,CAME,QAAQ,CAAE,kBAACwB,CAAD,QAAOvB,CAAAA,OAAO,CAACuB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAd,EANZ,EAvCF,cA+CE,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,kBAFZ,CAGE,cAAY,UAHd,CAIE,OAAO,CAAE,yBACP7B,CAAAA,gBAAgB,CACZe,OAAO,IAAMd,mBAAmB,CAAC,KAAD,CADpB,CAEZc,OAAO,EAHJ,EAJX,aA/CF,CA2DG,CAACf,gBAAD,eACC,4BACE,SAAS,CAAC,kBADZ,CAEE,cAAY,sBAFd,CAGE,OAAO,CAAE,kBAAM,CACbS,WAAW,CAAC,KAAD,CAAX,CACAE,qBAAqB,CAAC,KAAD,CAArB,CACD,CANH,CAOE,SAAS,CAAE,mBAACe,CAAD,CAAO,CAChB,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuB,CACrBlB,WAAW,CAAC,KAAD,CAAX,CACAE,qBAAqB,CAAC,KAAD,CAArB,CACD,CACF,CAZH,CAaE,aAAW,sBAbb,CAcE,QAAQ,CAAE,CAdZ,CAeE,IAAI,CAAC,QAfP,WA5DJ,cAgFE,4BACE,SAAS,CAAC,mBADZ,CAEE,cAAY,sBAFd,CAGE,OAAO,CAAE,yBAAMA,CAAAA,qBAAqB,CAAC,CAACD,kBAAF,CAA3B,EAHX,CAIE,SAAS,CAAE,mBAACgB,CAAD,CAAO,CAChB,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuBhB,qBAAqB,CAAC,CAACD,kBAAF,CAArB,CACxB,CANH,CAOE,QAAQ,CAAE,CAPZ,CAQE,IAAI,CAAC,QARP,eAUE,oBAAC,YAAD,MAVF,CAhFF,cA4FE,4BACE,SAAS,CAAC,gBADZ,CAEE,cAAY,wBAFd,CAGE,OAAO,CAAE,yBAAMG,CAAAA,eAAe,CAAC,CAACD,YAAF,CAArB,EAHX,CAIE,SAAS,CAAE,mBAACc,CAAD,CAAO,CAChB,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuBd,eAAe,CAAC,CAACD,YAAF,CAAf,CACxB,CANH,CAOE,QAAQ,CAAE,CAPZ,CAQE,IAAI,CAAC,QARP,eAUE,oBAAC,gBAAD,MAVF,CA5FF,CAtBJ,CADF,CAmID,CAlLM","sourcesContent":["import React, { useState } from 'react';\r\nimport { FaRegListAlt, FaRegCalendarAlt } from 'react-icons/fa';\r\nimport moment from 'moment';\r\nimport PropTypes from 'prop-types';\r\nimport { firebase } from '../firebase';\r\nimport { useSelectedProjectValue } from '../context';\r\nimport { ProjectOverlay } from './ProjectOverlay';\r\nimport { TaskDate } from './TaskDate';\r\n\r\nexport const AddTask = ({\r\n  showAddTaskMain = true,\r\n  shouldShowMain = false,\r\n  showQuickAddTask,\r\n  setShowQuickAddTask,\r\n}) => {\r\n  const [task, setTask] = useState('');\r\n  const [taskDate, setTaskDate] = useState('');\r\n  const [project, setProject] = useState('');\r\n  const [showMain, setShowMain] = useState(shouldShowMain);\r\n  const [showProjectOverlay, setShowProjectOverlay] = useState(false);\r\n  const [showTaskDate, setShowTaskDate] = useState(false);\r\n\r\n  const { selectedProject } = useSelectedProjectValue();\r\n\r\n  const addTask = () => {\r\n    const projectId = project || selectedProject;\r\n    let collatedDate = '';\r\n\r\n    if (projectId === 'TODAY') {\r\n      collatedDate = moment().format('DD/MM/YYYY');\r\n    } else if (projectId === 'NEXT_7') {\r\n      collatedDate = moment().add(7, 'days').format('DD/MM/YYYY');\r\n    }\r\n\r\n    return (\r\n      task &&\r\n      projectId &&\r\n      firebase\r\n        .firestore()\r\n        .collection('tasks')\r\n        .add({\r\n          archived: false,\r\n          projectId,\r\n          task,\r\n          date: collatedDate || taskDate,\r\n          userId: 'ahmadsaleh',\r\n        })\r\n        .then(() => {\r\n          setTask('');\r\n          setProject('');\r\n          setShowMain('');\r\n          setShowProjectOverlay(false);\r\n        })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={showQuickAddTask ? 'add-task add-task__overlay' : 'add-task'}\r\n      data-testid=\"add-task-comp\"\r\n    >\r\n      {showAddTaskMain && (\r\n        <div\r\n          className=\"add-task__shallow\"\r\n          data-testid=\"show-main-action\"\r\n          onClick={() => setShowMain(!showMain)}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter') setShowMain(!showMain);\r\n          }}\r\n          tabIndex={0}\r\n          aria-label=\"Add task\"\r\n          role=\"button\"\r\n        >\r\n          <span className=\"add-task__plus\">+</span>\r\n          <span className=\"add-task__text\">Add Task</span>\r\n        </div>\r\n      )}\r\n\r\n      {(showMain || showQuickAddTask) && (\r\n        <div className=\"add-task__main\" data-testid=\"add-task-main\">\r\n          {showQuickAddTask && (\r\n            <>\r\n              <div data-testid=\"quick-add-task\">\r\n                <h2 className=\"header\">Quick Add Task</h2>\r\n                <span\r\n                  className=\"add-task__cancel-x\"\r\n                  data-testid=\"add-task-quick-cancel\"\r\n                  aria-label=\"Cancel adding task\"\r\n                  onClick={() => {\r\n                    setShowMain(false);\r\n                    setShowProjectOverlay(false);\r\n                    setShowQuickAddTask(false);\r\n                  }}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      setShowMain(false);\r\n                      setShowProjectOverlay(false);\r\n                      setShowQuickAddTask(false);\r\n                    }\r\n                  }}\r\n                  tabIndex={0}\r\n                  role=\"button\"\r\n                >\r\n                  X\r\n                </span>\r\n              </div>\r\n            </>\r\n          )}\r\n          <ProjectOverlay\r\n            setProject={setProject}\r\n            showProjectOverlay={showProjectOverlay}\r\n            setShowProjectOverlay={setShowProjectOverlay}\r\n          />\r\n          <TaskDate\r\n            setTaskDate={setTaskDate}\r\n            showTaskDate={showTaskDate}\r\n            setShowTaskDate={setShowTaskDate}\r\n          />\r\n          <input\r\n            className=\"add-task__content\"\r\n            aria-label=\"Enter your task\"\r\n            data-testid=\"add-task-content\"\r\n            type=\"text\"\r\n            value={task}\r\n            onChange={(e) => setTask(e.target.value)}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"add-task__submit\"\r\n            data-testid=\"add-task\"\r\n            onClick={() =>\r\n              showQuickAddTask\r\n                ? addTask() && setShowQuickAddTask(false)\r\n                : addTask()\r\n            }\r\n          >\r\n            Add Task\r\n          </button>\r\n          {!showQuickAddTask && (\r\n            <span\r\n              className=\"add-task__cancel\"\r\n              data-testid=\"add-task-main-cancel\"\r\n              onClick={() => {\r\n                setShowMain(false);\r\n                setShowProjectOverlay(false);\r\n              }}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  setShowMain(false);\r\n                  setShowProjectOverlay(false);\r\n                }\r\n              }}\r\n              aria-label=\"Cancel adding a task\"\r\n              tabIndex={0}\r\n              role=\"button\"\r\n            >\r\n              Cancel\r\n            </span>\r\n          )}\r\n          <span\r\n            className=\"add-task__project\"\r\n            data-testid=\"show-project-overlay\"\r\n            onClick={() => setShowProjectOverlay(!showProjectOverlay)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter') setShowProjectOverlay(!showProjectOverlay);\r\n            }}\r\n            tabIndex={0}\r\n            role=\"button\"\r\n          >\r\n            <FaRegListAlt />\r\n          </span>\r\n          <span\r\n            className=\"add-task__date\"\r\n            data-testid=\"show-task-date-overlay\"\r\n            onClick={() => setShowTaskDate(!showTaskDate)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter') setShowTaskDate(!showTaskDate);\r\n            }}\r\n            tabIndex={0}\r\n            role=\"button\"\r\n          >\r\n            <FaRegCalendarAlt />\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nAddTask.propTypes = {\r\n  showAddTaskMain: PropTypes.bool,\r\n  shouldShowMain: PropTypes.bool,\r\n  showQuickAddTask: PropTypes.bool,\r\n  setShowQuickAddTask: PropTypes.func,\r\n};"]},"metadata":{},"sourceType":"module"}